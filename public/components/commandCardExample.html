<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejemplo de Command Card Component</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #1a1a1a;
            color: #e0e0e0;
            margin: 0;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        h1 {
            color: #ffffff;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .command-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .actions {
            background-color: #2d2d2d;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        button {
            background-color: #4a4a4a;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #666;
        }
        
        #eventLog {
            background-color: #2d2d2d;
            border-radius: 8px;
            padding: 15px;
            margin-top: 30px;
            height: 200px;
            overflow-y: auto;
        }
        
        .log-entry {
            margin-bottom: 8px;
            padding: 8px;
            background-color: #333;
            border-radius: 4px;
            font-family: monospace;
        }
        
        .log-entry:nth-child(odd) {
            background-color: #3a3a3a;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Comandos para Stream Chat</h1>
        
        <div class="actions">
            <button id="addCommand">Agregar Comando</button>
            <button id="updateRandomCommand">Actualizar Comando</button>
            <button id="clearCommands">Limpiar Comandos</button>
        </div>
        
        <div class="command-grid" id="commandContainer"></div>
        
        <div id="eventLog">
            <h3>Registro de Eventos:</h3>
            <div id="logEntries"></div>
        </div>
    </div>
    
    <script type="module">
        import CommandCardComponent from './commandCardComponent.js';
        
        // Datos de ejemplo para los comandos
        const sampleCommands = [
            {
                name: 'Saludo',
                command: '!hola',
                description: 'Saluda al usuario en el chat',
                id: 1
            },
            {
                name: 'Información',
                command: '!info',
                description: 'Muestra información sobre el canal y horarios',
                id: 2
            },
            {
                name: 'Redes Sociales',
                command: '!redes',
                description: 'Muestra enlaces a todas las redes sociales',
                id: 3   
            },
            {
                name: 'Música',
                command: '!song',
                description: 'Muestra la canción que está sonando actualmente',
                id: 4
            },
            {
                name: 'Donación',
                command: '!donate',
                description: 'Muestra enlaces para realizar donaciones',
                id: 5
            }
        ];
        
        // Referencias a elementos del DOM
        const commandContainer = document.getElementById('commandContainer');
        const addCommandBtn = document.getElementById('addCommand');
        const updateRandomCommandBtn = document.getElementById('updateRandomCommand');
        const clearCommandsBtn = document.getElementById('clearCommands');
        const logEntries = document.getElementById('logEntries');
        
        // Función para agregar una entrada al registro de eventos
        function logEvent(message, data = null) {
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            
            const timestamp = new Date().toLocaleTimeString();
            let logText = `[${timestamp}] ${message}`;
            
            if (data) {
                logText += `: ${JSON.stringify(data, null, 2)}`;
            }
            
            entry.textContent = logText;
            logEntries.prepend(entry);
        }
        
        // Función para crear un comando con datos aleatorios
        function createRandomCommand() {
            const randomIndex = Math.floor(Math.random() * sampleCommands.length);
            const commandData = { ...sampleCommands[randomIndex] };
                        
            // Crear el componente de comando
            const commandCard = new CommandCardComponent();
            commandCard.setData(commandData);
            
            // Agregar event listeners
            commandCard.addEventListener('command-action', (e) => {
                logEvent(`Acción en comando: ${e.detail.action}`, e.detail.data);
                
                // Manejar la acción de eliminar
                if (e.detail.action === 'delete') {
                    commandCard.delete();
                }
                
                // Manejar la acción de ejecutar
                if (e.detail.action === 'execute') {
                    logEvent(`Ejecutando comando: ${e.detail.data.command}`);
                    // Aquí se podría implementar la lógica para ejecutar el comando
                }
            });
            
            commandCard.addEventListener('command-delete', (e) => {
                logEvent('Comando eliminado', e.detail);
            });
            
            commandCard.addEventListener('command-context-menu', (e) => {
                logEvent('Menú contextual abierto', {
                    position: { x: e.detail.x, y: e.detail.y },
                    data: e.detail.data
                });
            });
            
            return commandCard;
        }
        
        // Event listener para agregar un comando
        addCommandBtn.addEventListener('click', () => {
            const commandCard = createRandomCommand();
            commandContainer.appendChild(commandCard);
            logEvent('Comando agregado', commandCard.getData());
        });
        
        // Event listener para actualizar un comando aleatorio
        updateRandomCommandBtn.addEventListener('click', () => {
            const commands = commandContainer.querySelectorAll('command-card');
            
            if (commands.length === 0) {
                logEvent('No hay comandos para actualizar');
                return;
            }
            
            const randomCommand = commands[0];
            const newName = `Comando actualizado ${Date.now()}`;
            
            randomCommand.setData({
                name: newName,
                description: 'Este comando ha sido actualizado'
            });
            
            logEvent('Comando actualizado', randomCommand.getData());
        });
        
        // Event listener para limpiar todos los comandos
        clearCommandsBtn.addEventListener('click', () => {
            commandContainer.innerHTML = '';
            logEvent('Todos los comandos han sido eliminados');
        });
        
        // Inicializar con algunos comandos de ejemplo
        window.addEventListener('DOMContentLoaded', () => {
            // Agregar algunos comandos iniciales
            for (let i = 0; i < 5; i++) {
                const commandCard = createRandomCommand();
                commandContainer.appendChild(commandCard);
            }
            
            logEvent('Aplicación inicializada con 5 comandos');
        });
    </script>
</body>
</html>
